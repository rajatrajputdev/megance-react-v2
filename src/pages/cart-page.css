/* ===== File: src/pages/cart-page.css ===== */

/* Core layout */
.cart-page.container-narrow { padding-top: 80px; max-width: 1120px; margin: 0 auto; padding: 24px; }
.cart-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; }
.cart-title { font-size: 28px; font-weight: 700; letter-spacing: .2px; }
.reserve-note { font-size: 13px; opacity: .7; margin-top: 6px; }

.cart-grid { display: grid; grid-template-columns: 1fr 360px; gap: 28px; }
@media (max-width: 960px) { .cart-grid { grid-template-columns: 1fr; } }

/* Glass surfaces (light frost) */
.glass-surface {
  background: rgba(255,255,255,0.7);
  backdrop-filter: blur(20px) saturate(120%);
  -webkit-backdrop-filter: blur(20px) saturate(120%);
  border: 1px solid rgba(255,255,255,0.6);
  border-radius: 14px;
  box-shadow: 0 8px 20px rgba(0,0,0,0.06);
}

/* Stronger elevation for summary box */
.strong-elevation {
  box-shadow: 0 14px 30px rgba(0,0,0,0.10), 0 2px 8px rgba(0,0,0,0.05);
}

/* Items */
.cart-item-card { display: flex; gap: 16px; padding: 16px; position: relative; margin-bottom: 26px; }
.item-remove {
  position: absolute; top: 10px; right: 12px; border: none; background: transparent;
  font-size: 22px; cursor: pointer; color: #1a1a1a; opacity: .6; transition: opacity .2s ease;
}
.item-remove:hover { opacity: 1; }

.item-thumb img { width: 96px; height: 96px; object-fit: cover; border-radius: 10px; }
.item-info { flex: 1; display: flex; flex-direction: column; gap: 10px; }
.item-name { font-size: 16px; font-weight: 700; }
.item-price { font-weight: 700; letter-spacing: .2px; }

.variant-row { display: flex; gap: 8px; margin-top: 6px; flex-wrap: wrap; }
.variant-pill {
  padding: 6px 10px; font-size: 12px; border-radius: 999px; border: 1px solid rgba(0,0,0,0.06);
  background: linear-gradient(180deg, rgba(255,255,255,.9), rgba(255,255,255,.6));
}

/* Quantity controls */
.qty-row { display: flex; align-items: center; gap: 14px; margin-top: 6px; }
.qty-label { font-size: 12px; opacity: .7; }
.qty-control {
  display: flex; align-items: center; border: 1px solid rgba(0,0,0,0.08); border-radius: 10px; overflow: hidden;
  background: rgba(255,255,255,0.8);
  transition: box-shadow .25s cubic-bezier(.25,.8,.25,1), transform .25s cubic-bezier(.25,.8,.25,1);
}
.qty-control button {
  width: 36px; height: 36px; border: none; background: rgba(245,245,245,.9); cursor: pointer;
  font-size: 18px; line-height: 1; transition: background .2s ease, transform .2s ease;
}
.qty-control button:hover { background: #f0f0f0; color: #111; transform: translateY(-1px); }
.qty-control input { color: #111; width: 48px; text-align: center; border: none; outline: none; background: transparent; font-weight: 600; }
.stock-hint, .drawer-stock-hint { font-size: 12px; color: #d33; }

/* Glow micro-interactions */
.glow-on-hover:hover {
  box-shadow: 0 8px 24px rgba(0,0,0,0.08), 0 0 0 3px rgba(0,0,0,0.04) inset;
}
.glow-primary {
  transition: box-shadow .25s cubic-bezier(.25,.8,.25,1), transform .2s ease;
}
.glow-primary:hover {
  box-shadow: 0 12px 28px rgba(0,0,0,0.15), 0 0 0 3px rgba(0,0,0,0.06) inset;
  transform: translateY(-1px);
}

/* Summary (non-sticky, stays in normal flow) */
.summary { position: relative !important; height: fit-content; }
.summary-box { padding: 20px; }
.summary-title { font-weight: 700; margin-bottom: 14px; font-size: 18px; }
.summary-line { display: flex; justify-content: space-between; margin-bottom: 10px; font-size: 14px; }
.summary-total { display: flex; justify-content: space-between; font-weight: 800; margin-top: 10px; font-size: 16px; }
.checkout-btn {
  width: 100%; margin-top: 16px; padding: 14px; background: #111; color: #fff; border: none; border-radius: 12px; cursor: pointer;
  font-weight: 700; letter-spacing: .3px;
}

/* Benefits */
.benefit-cards { margin-top: 18px; display: flex; flex-direction: column; gap: 12px; }
.benefit-card { display: flex; gap: 12px; padding: 12px; }
.benefit-img img { width: 64px; height: 64px; object-fit: cover; border-radius: 10px; }
.benefit-title { font-weight: 700; font-size: 14px; }
.benefit-text { font-size: 12px; opacity: .8; }

/* Empty state */
.empty-state { text-align: center; padding: 32px 16px; }
.empty-title { font-size: 18px; font-weight: 600; }

/* Basic utility buttons */
.btn { display: inline-block; padding: 10px 14px; border-radius: 10px; text-decoration: none; }
.btn-dark { background: #111; color: #fff; }
.btn-dark:hover { box-shadow: 0 10px 24px rgba(0,0,0,.18); }
.link-underline { text-decoration: underline; }

/* ===== Mini Cart Drawer (Light Glass, 400px) ===== */
.cart-drawer { position: fixed; inset: 0; pointer-events: none; z-index: 1000; }
.cart-drawer__overlay {
  position: absolute; inset: 0; background: rgba(0,0,0,.45);
  opacity: 0; transition: opacity .35s cubic-bezier(.25,.8,.25,1);
}
.cart-drawer__panel {
  position: absolute; top: 0; right: 0; width: 400px; max-width: 86vw; height: 100%; transform: translateX(100%);
  transition: transform .35s cubic-bezier(.25,.8,.25,1); display: flex; flex-direction: column;
  border-left: 1px solid rgba(255,255,255,0.5);
}
.glass-drawer {
  background: rgba(255,255,255,0.72);
  backdrop-filter: blur(20px) saturate(120%);
  -webkit-backdrop-filter: blur(20px) saturate(120%);
  box-shadow: -20px 0 40px rgba(0,0,0,.08);
}

/* Show when toggled */
body.show-cart-drawer .cart-drawer { pointer-events: auto; }
body.show-cart-drawer .cart-drawer__overlay { opacity: 1; }
body.show-cart-drawer .cart-drawer__panel { transform: translateX(0); }

/* Drawer content */
.cart-drawer__header { display: flex; justify-content: space-between; align-items: center; padding: 16px; border-bottom: 1px solid rgba(0,0,0,0.06); }
.cart-drawer__title { font-weight: 800; }
.cart-drawer__close { border: none; background: transparent; font-size: 22px; cursor: pointer; opacity: .7; }
.cart-drawer__close:hover { opacity: 1; }

.cart-drawer__items { flex: 1; overflow-y: auto; padding: 12px; }
.drawer-item { display: flex; gap: 12px; padding: 12px; margin-bottom: 12px; }
.drawer-thumb img { width: 64px; height: 64px; object-fit: cover; border-radius: 10px; }
.drawer-info { flex: 1; display: flex; flex-direction: column; }
.drawer-top { display: flex; justify-content: space-between; align-items: center; gap: 8px; }
.drawer-name { font-size: 14px; font-weight: 700; }
.drawer-remove { background: transparent; border: none; cursor: pointer; font-size: 12px; opacity: .7; }
.drawer-remove:hover { opacity: 1; }
.drawer-variant { display: flex; gap: 8px; margin: 6px 0; }
.drawer-bottom { display: flex; justify-content: space-between; align-items: center; margin-top: 8px; }
.drawer-price { font-weight: 700; }
.cart-drawer__empty { padding: 18px; }

.cart-drawer__footer { padding: 16px; border-top: 1px solid rgba(0,0,0,0.06); }
.drawer-line { display: flex; justify-content: space-between; font-size: 14px; margin-bottom: 6px; }
.drawer-total { display: flex; justify-content: space-between; font-weight: 800; margin: 12px 0; }
.drawer-checkout {
  width: 100%; padding: 14px; background: #111; color: #fff; border: none; border-radius: 12px; cursor: pointer;
  font-weight: 800; letter-spacing: .3px;
}

/* Responsive tweaks */
@media (max-width: 768px) {
  .cart-grid { grid-template-columns: 1fr; gap: 18px; }
  .summary { position: static; }
  .item-thumb img { width: 84px; height: 84px; }
  
.cart-page.container-narrow {  padding: 24px 10px; }
}

/* ===== FINAL STICKY SUMMARY FIX ===== */

.cart-grid {
  display: grid;
  grid-template-columns: 1fr 360px;
  gap: 28px;
  align-items: start;              /* ✅ prevents summary from dropping below items */
  overflow: visible !important;    /* ✅ allows sticky to work properly */
}

.cart-page.container-narrow {
  overflow: visible !important;    /* ✅ ensures sticky isn't clipped by parent */
}

/* --- Sticky Summary on Desktop --- */
@media (min-width: 961px) {
  .summary {
    position: sticky !important;
    top: 100px;                    /* ✅ adjust based on navbar height */
    align-self: start;
    height: fit-content;
    z-index: 3;                    /* ✅ prevents being hidden behind other blocks */
  }

  /* Ensure smooth scroll and proper stacking */
  html, body {
    scroll-behavior: smooth;
    overflow-x: hidden;
  }

  /* Spacing below summary to avoid jump when free shipping renders */
  .benefit-cards {
    margin-top: 20px;
    position: relative;
    z-index: 2;
  }
}

/* --- Mobile Behavior --- */
@media (max-width: 960px) {
  .cart-grid {
    grid-template-columns: 1fr;
    gap: 18px;
  }

  .summary {
    position: static !important;
    top: auto !important;
    z-index: 1;
  }

  .cart-page.container-narrow {
    padding: 24px 10px;
  }
}

/* --- Optional: subtle sticky animation --- */
@supports (animation-timeline: scroll()) {
  @keyframes sticky-fade {
    from { opacity: 0; transform: translateY(10px); }
    to { opacity: 1; transform: translateY(0); }
  }

  .summary {
    animation: sticky-fade 0.4s ease-out both;
  }
}
